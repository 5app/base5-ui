---
name: PageTitleAnnouncer
menu: Components
---

import {Props} from 'docz';
import PageTitle from './PageTitle';

# PageTitleAnnouncer

Create accessible page title announcements when navigating between pages in a single-page React app (SPA).

Inspired by [this blog post by Hugo Giraudel](https://hugogiraudel.com/2020/01/15/accessible-title-in-a-single-page-react-application/#title-announcer).

## The problem

When browsing a traditional server-rendered website, following a link causes the page to reload with the content of the new page. Screenreaders take this as a signal to announce the title of the new page to the user.

In a SPA, this typically doesn't happen by default, as new content is displayed without a full page reload. Because of this, users of assistive technologies might miss out on the fact that a new page was loaded, or if they do, they'll still manually have to navigate to the main content of the page.

The `<PageTitleAnnouncer>` and `<PageTitle>` components help you mitigate both of these issues by moving the user's focus to the main `<h1>` heading element on the page – but only after an in-app navigation has taken place.

## Setup

To keep track of the navigation state of the app, you need to wrap your app with the `PageTitleAnnouncer` component and provide it with the `pathname` prop, which you'd typically get from your client-side routing library. The content of this prop has to be a string, but it doesn't need to be the literal `location.pathname` attribute – you can also dynamically construct it to include e.g. query parameters that you'd like the component to keep track of.

```js
import {useLocation} from 'react-router';
import PageTitleAnnouncer from 'base5-ui/PageTitleAnnouncer';

function YourApp({children}) {
	const {pathname} = useLocation();

	return (
		<PageTitleAnnouncer pathname={pathname}>{children}</PageTitleAnnouncer>
	);
}
```

Once your app has been wrapped in this way, use the `PageTitle` component to render the main headings of each of your pages:

```js
import {PageTitle} from 'base5-ui/PageTitleAnnouncer';

function HomePage() {
	return (
		<main>
			<PageTitle>Welcome to my super accessible app!</PageTitle>
		</main>
	);
}
```

## Custom styling

If you're already using styled heading components, you can pass those to the `PageTitle` component using the `as` prop; or pass `PageTitle` to the `as` prop of your styled component – both approaches will work.

```jsx
<PageTitle as={MainHeading}>Welcome to my super accessible app!</PageTitle>
```

```jsx
<MainHeading as={PageTitle}>Welcome to my super accessible app!</MainHeading>
```

You can also create a new styled component based on `PageTitle`. It will render an `h1` element by default.

```js
const MainHeading = styled(PageTitle)`
	/* Your heading styles */
`;
```

## Visually hiding the heading

If a page in your app doesn't have an obvious readable heading, you can still provide a title to screen reader users by using the `PageTitle` component with the `visuallyHidden` prop. This hides the heading from sighted users, while announcing & focusing it for users of assisitive technologies.

```jsx
<PageTitle visuallyHidden>Your Profile</PageTitle>
```

## Handling loading states

The announcement of the page title is tied to changes of the `pathname` prop provided to `PageTitleAnnouncer`, and not to whether or not a new `PageTitle` was rendered. This means that when your users navigate to a page that takes a moment to load the data that's needed to display a meaningful page title, no title will be announced (because it's not loaded yet).

In those cases, make sure to still render the `PageTitle` component, but apply the prop `deferAnnouncementWhile` with a truthy value that turns falsy when the page has finished loading.
`PageTitleAnnouncer` will then only announce the title when it's ready.

```jsx
<PageTitle deferAnnouncementWhile={isLoading}>
	{user.favourites.title}
</PageTitle>
```

## `PageTitle` props

<Props isToggle of={PageTitle} />
