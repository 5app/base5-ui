{"version":3,"sources":["webpack:///../src/Modal/README.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","of","Modal","isMDXComponent"],"mappings":"uhBASO,IAAMA,EAAe,Q,sMAE5B,IAKMC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,E,oIACF,mBACD,OAAO,YAACJ,EAAD,KAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAK5E,iBAAQ,CACN,GAAM,SADR,SAGA,6FACA,iBAAQ,CACN,GAAM,YADR,YAGA,sBACE,kBAAIC,WAAW,MAAf,sCACA,kBAAIA,WAAW,MAAf,4BAAiD,kBAAIA,WAAW,MAC5D,kBAAIA,WAAW,MAAf,sDACA,kBAAIA,WAAW,MAAf,oFACA,kBAAIA,WAAW,MAAf,+DAEJ,kBAAIA,WAAW,MAAf,oCAAyD,8BAAzD,mBACA,kBAAIA,WAAW,MAAf,yCAEF,iBAAQ,CACN,GAAM,QADR,QAGA,8DAA6C,mBAAGA,WAAW,KAAQ,CAC/D,KAAQ,2EADiC,eAA7C,KAGA,iBAAQ,CACN,GAAM,cADR,cAGA,iBAAQ,CACN,GAAM,iBADR,iBAGA,+CAA8B,0BAAYA,WAAW,KAAvB,gBAA9B,QAA+F,0BAAYA,WAAW,KAAvB,kBAA/F,gBAA0K,0BAAYA,WAAW,KAAvB,gBAA1K,4KACA,qBAAG,0BAAYA,WAAW,KAAvB,kBAAH,cAA4E,0BAAYA,WAAW,KAAvB,OAA5E,gSAA4Z,0BAAYA,WAAW,KAAvB,MAA5Z,wBACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,iBADZ,wRAcL,iBAAQ,CACN,GAAM,uCADR,uCAGA,4BAAW,0BAAYA,WAAW,KAAvB,kBAAX,sMACA,iWACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,iBADZ,yCAML,uPACA,iBAAQ,CACN,GAAM,oBADR,oBAGA,8FAA6E,0BAAYA,WAAW,KAAvB,SAA7E,8FAA6N,0BAAYA,WAAW,KAAvB,mBAA7N,UACA,8MACA,iBAAQ,CACN,GAAM,2BADR,2BAGA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,iBADZ,wzBA+BL,iBAAQ,CACN,GAAM,eADR,eAGA,YAAC,IAAD,CAAOC,GAAIC,IAAOH,QAAQ,UAC1B,iBAAQ,CACN,GAAM,wBADR,wBAGA,4BAAW,0BAAYC,WAAW,KAAvB,SAAX,sCAAmG,0BAAYA,WAAW,KAAvB,mBAAnG,qCAAoM,mBAAGA,WAAW,KAAQ,CACtN,KAAQ,kDADwL,aAApM,qMAE4N,0BAAYA,WAAW,KAAvB,SAF5N,2CAGA,+CAA8B,0BAAYA,WAAW,KAAvB,iBAA9B,QAAgG,0BAAYA,WAAW,KAAvB,qBAAhG,mDAAiN,0BAAYA,WAAW,KAAvB,cAAjN,OAA+Q,0BAAYA,WAAW,KAAvB,mBAA/Q,KACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,iBADZ,kxCA2CL,iBAAQ,CACN,GAAM,4EADR,4EAGA,kDAAiC,0BAAYA,WAAW,KAAvB,eAAjC,mLACA,gLAA+J,0BAAYA,WAAW,KAAvB,0BAA/J,eACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,iBADZ,mJ,oMAYTJ,EAAWO,gBAAiB","file":"component---src-modal-readme-mdx-91413f691bf1eaeed7c5.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/circleci/repo/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nimport { Playground, Props } from 'docz';\nimport { ModalManager, BodyScrollLock, useModalManager } from './';\nimport Modal from './Modal';\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n\n    <h1 {...{\n      \"id\": \"modal\"\n    }}>{`Modal`}</h1>\n    <p>{`React components and hooks for building accessible modals (dialogs).`}</p>\n    <h2 {...{\n      \"id\": \"features\"\n    }}>{`Features`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Supports multiple (stacked) modals`}</li>\n      <li parentName=\"ul\">{`Handles focus management:`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Contain keyboard focus inside of the topmost modal`}</li>\n          <li parentName=\"ul\">{`Return keyboard focus to the element that triggered the modal after it is closed`}</li>\n          <li parentName=\"ul\">{`Contain screen reader navigation within the topmost modal`}</li>\n        </ul></li>\n      <li parentName=\"ul\">{`Close the topmost modal when the `}<kbd>{`Esc`}</kbd>{` key is pressed`}</li>\n      <li parentName=\"ul\">{`Prevent scrolling \"behind\" the modal`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"demo\"\n    }}>{`Demo`}</h2>\n    <p>{`View a demo of the modal in action on `}<a parentName=\"p\" {...{\n        \"href\": \"https://codesandbox.io/s/base5-ui-modal-example-hdjk9?file=/src/App.js\"\n      }}>{`Codesandbox`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"how-to-use\"\n    }}>{`How to use`}</h2>\n    <h3 {...{\n      \"id\": \"prerequisites\"\n    }}>{`Prerequisites`}</h3>\n    <p>{`Wrap your app with the `}<inlineCode parentName=\"p\">{`ModalManager`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`BodyScrollLock`}</inlineCode>{` components. `}<inlineCode parentName=\"p\">{`ModalManager`}</inlineCode>{` does not render an element to the DOM and can be as high up as you want. It keeps track of all the open modals and makes sure that focus is properly locked & restored.`}</p>\n    <p><inlineCode parentName=\"p\">{`BodyScrollLock`}</inlineCode>{` renders a `}<inlineCode parentName=\"p\">{`div`}</inlineCode>{` by default and should wrap the main content of your app. The HTML elements of your modals need to be rendered outside of this container. (If you use base5-ui's Portal or the built-in Modal component, this will be the case by default.) You can customise the rendered element using the `}<inlineCode parentName=\"p\">{`as`}</inlineCode>{` prop as seen below.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`import {ModalManager, BodyScrollLock} from 'base5-ui/Modal';\n\nfunction App() {\n    return (\n        <ModalManager>\n            <BodyScrollLock as=\"main\">\n                {/* The rest of your app */}\n            </BodyScrollLock>\n        </ModalManager>\n    );\n}\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"bodyscrolllock-styling-requirements\"\n    }}>{`BodyScrollLock styling requirements`}</h4>\n    <p>{`The `}<inlineCode parentName=\"p\">{`BodyScrollLock`}</inlineCode>{` component prevents the page body from being scrolled when a modal is open. The method it uses is very robust and works even if your app has elements with a fixed position, like navigation bars.`}</p>\n    <p>{`One trade-off to make this work seamlessly is that we require the vertical scrollbar on your root element to be visible always (even if the page content isn't long enough to cause a scrollbar). Without the below CSS, opening a modal in your app may cause the page in the background to shift slightly as the scrollbar disappears.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-css\"\n      }}>{`html {\n    overflow-y: scroll;\n}\n`}</code></pre>\n    <p>{`(Btw: Having this CSS on your page may be a good idea anyway â€“ it ensures that centered elements don't jump around ever so slightly when navigating between long pages with a vertical scrollbar and short pages without one.)`}</p>\n    <h3 {...{\n      \"id\": \"rendering-modals\"\n    }}>{`Rendering modals`}</h3>\n    <p>{`Once the above preparations are done, you can either use the built-in `}<inlineCode parentName=\"p\">{`Modal`}</inlineCode>{` component (built on styled-components) to render your modals, or build your own using the `}<inlineCode parentName=\"p\">{`useModalManager`}</inlineCode>{` hook.`}</p>\n    <p>{`Keep in mind that you're responsible for opening & closing your modals. We recommend that you keep your modal display logic tied to a router location or React state, as shown below.`}</p>\n    <h4 {...{\n      \"id\": \"modal-component-example\"\n    }}>{`Modal component example`}</h4>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`import Modal from 'base5-ui/Modal';\n\nfunction MyPage() {\n    const [hasModal, setHasModal] = useState(false);\n\n    function toggleModal() {\n        setHasModal(prev => !prev);\n    }\n\n    return (\n        <>\n            <Button onClick={toggleModal}>Toggle Modal</Button>\n            {hasModal && (\n                <Modal\n                    name=\"my-modal\"\n                    onRequestClose={toggleModal}\n                    aria-labelledby=\"heading-id\"\n                >\n                    <Card>\n                        <Heading id=\"heading-id\">My first modal dialog</Heading>\n                        <p>This is a modal.</p>\n                        <Button onClick={toggleModal}>Got it.</Button>\n                    </Card>\n                </Modal>\n            )}\n        </>\n    );\n}\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"modal-props\"\n    }}>{`Modal props`}</h4>\n    <Props of={Modal} mdxType=\"Props\" />\n    <h4 {...{\n      \"id\": \"custom-modal-example\"\n    }}>{`Custom modal example`}</h4>\n    <p>{`The `}<inlineCode parentName=\"p\">{`Modal`}</inlineCode>{` component is a wrapper around the `}<inlineCode parentName=\"p\">{`useModalManager`}</inlineCode>{` hook and the external dependency `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/theKashey/react-focus-lock\"\n      }}>{`FocusLock`}</a>{`. If you want to customise how your modals are rendered, you can easily do so by re-composing its elements in a different way. The example below is a slightly simplified version of the built-in `}<inlineCode parentName=\"p\">{`Modal`}</inlineCode>{` component that you can use as a guide.`}</p>\n    <p>{`Be sure to include the `}<inlineCode parentName=\"p\">{`role=\"dialog\"`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`aria-modal=\"true\"`}</inlineCode>{` attributes on your modal component, as well as `}<inlineCode parentName=\"p\">{`aria-label`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`aria-labelledby`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`import React from 'react';\nimport Portal from 'base5-ui/Portal';\nimport CenterContent from 'base5-ui/CenterContent';\nimport {useModalManager} from 'base5-ui/Modal/ModalManager';\nimport FocusLock from 'react-focus-lock';\n\nconst ModalWrapper = /* Your custom modal wrapper styling. */\nconst Overlay = /* Your custom overlay styling. */\n\nfunction Modal({children, name, onRequestClose, ...otherProps}) {\n    /**\n     * useModalManager returns a ref that must be\n     * passed to the modal wrapper component, and\n     * an \\`isAtTop\\` flag that's true when this modal\n     * is at the top (when multiple modals are open).\n     */\n    const {modalRef, isAtTop} = useModalManager({\n        name,\n        onRequestClose,\n    });\n\n    return (\n        <Portal>\n            <ModalWrapper\n                ref={modalRef}\n                id={name}\n                {...otherProps}\n                role=\"dialog\"\n                aria-modal=\"true\"\n            >\n                <CenterContent fillParent>\n                    <FocusLock>\n                        {isAtTop && <Overlay onClick={onRequestClose} />}\n                        {children}\n                    </FocusLock>\n                </CenterContent>\n            </ModalWrapper>\n        </Portal>\n    );\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"preventing-content-outside-of-modals-from-being-hidden-to-screen-readers\"\n    }}>{`Preventing content outside of modals from being hidden to screen readers`}</h3>\n    <p>{`When a modal is open, the `}<inlineCode parentName=\"p\">{`aria-hidden`}</inlineCode>{` attribute will be applied to any elements outside of it. This is done to prevent users of screen reader software from accidentally navigating outside of the modal boundaries.`}</p>\n    <p>{`If you want to prevent some elements (such as a live region used for accessible status updates) from being hidden in this way, you can wrap them in the `}<inlineCode parentName=\"p\">{`PreventModalAriaHidden`}</inlineCode>{` component:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`import {PreventModalAriaHidden} from 'base5-ui/Modal';\n\n<PreventModalAriaHidden>\n    <Status>...</Status>\n<PreventModalAriaHidden>\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}