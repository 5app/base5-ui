(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{xVui:function(e,n,o){"use strict";o.r(n),o.d(n,"_frontmatter",(function(){return s})),o.d(n,"default",(function(){return p}));o("5hJT"),o("W1QL"),o("K/PF"),o("t91x"),o("75LO"),o("PJhk"),o("mXGw");var a=o("/FXl"),t=o("TjRS"),l=o("ZFoC"),r=(o("oGIA"),o("iY1x"));o("aD51");function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e}).apply(this,arguments)}var s={};void 0!==s&&s&&s===Object(s)&&Object.isExtensible(s)&&!s.hasOwnProperty("__filemeta")&&Object.defineProperty(s,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/Modal/README.mdx"}});var d={_frontmatter:s},c=t.a;function p(e){var n=e.components,o=function(e,n){if(null==e)return{};var o,a,t={},l=Object.keys(e);for(a=0;a<l.length;a++)o=l[a],n.indexOf(o)>=0||(t[o]=e[o]);return t}(e,["components"]);return Object(a.b)(c,i({},d,o,{components:n,mdxType:"MDXLayout"}),Object(a.b)("h1",{id:"modal"},"Modal"),Object(a.b)("p",null,"React components and hooks for building accessible modals (dialogs)."),Object(a.b)("h2",{id:"features"},"Features"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Supports multiple (stacked) modals"),Object(a.b)("li",{parentName:"ul"},"Handles focus management:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"Contain keyboard focus inside of the topmost modal"),Object(a.b)("li",{parentName:"ul"},"Return keyboard focus to the element that triggered the modal after it is closed"),Object(a.b)("li",{parentName:"ul"},"Contain screen readers from navigating outside of the topmost modal"))),Object(a.b)("li",{parentName:"ul"},"Close the topmost modal when the ",Object(a.b)("kbd",null,"Esc")," key is pressed"),Object(a.b)("li",{parentName:"ul"},'Prevent scrolling "behind" the modal')),Object(a.b)("h2",{id:"how-to-use"},"How to use"),Object(a.b)("h3",{id:"prerequisites"},"Prerequisites"),Object(a.b)("p",null,"Wrap your app with the ",Object(a.b)("inlineCode",{parentName:"p"},"ModalManager")," and ",Object(a.b)("inlineCode",{parentName:"p"},"BodyScrollLock")," components. ",Object(a.b)("inlineCode",{parentName:"p"},"ModalManager")," does not render an element to the DOM and can be as high up as you want. It keeps track of all the open modals and makes sure that focus is properly locked & restored."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"BodyScrollLock")," renders a ",Object(a.b)("inlineCode",{parentName:"p"},"div")," by default and should wrap the main content of your app. The HTML elements of your modals need to be rendered outside of this container. (If you use base5-ui's Portal or the built-in Modal component, this will be the case by default.) You can customise the rendered element using the ",Object(a.b)("inlineCode",{parentName:"p"},"as")," prop as seen below."),Object(a.b)("pre",null,Object(a.b)("code",i({parentName:"pre"},{className:"language-jsx"}),"import {ModalManager, BodyScrollLock} from 'base5-ui/Modal';\n\nfunction App() {\n    return (\n        <ModalManager>\n            <BodyScrollLock as=\"main\">\n                {/* The rest of your app */}\n            </BodyScrollLock>\n        </ModalManager>\n    );\n}\n")),Object(a.b)("h3",{id:"rendering-modals"},"Rendering modals"),Object(a.b)("p",null,"Once the above preparations are done, you can either use the built-in ",Object(a.b)("inlineCode",{parentName:"p"},"Modal")," component (built on styled-components) to render your modals, or build your own using the ",Object(a.b)("inlineCode",{parentName:"p"},"useModalManager")," hook."),Object(a.b)("p",null,"Keep in mind that you're responsible for opening & closing your modals. We recommend that you keep your modal display logic tied to a router location or React state, as shown below."),Object(a.b)("h4",{id:"modal-component-example"},"Modal component example"),Object(a.b)("pre",null,Object(a.b)("code",i({parentName:"pre"},{className:"language-jsx"}),'import Modal from \'base5-ui/Modal\';\n\nfunction MyPage() {\n    const [hasModal, setHasModal] = useState(false);\n\n    function toggleModal() {\n        setHasModal(prev => !prev);\n    }\n\n    return (\n        <>\n            <Button onClick={toggleModal}>Toggle Modal</Button>\n            {hasModal && (\n                <Modal\n                    name="my-modal"\n                    onRequestClose={toggleModal}\n                    aria-labelledby="heading-id"\n                >\n                    <Card>\n                        <Heading id="heading-id">My first modal dialog</Heading>\n                        <p>This is a modal.</p>\n                        <Button onClick={toggleModal}>Got it.</Button>\n                    </Card>\n                </Modal>\n            )}\n        </>\n    );\n}\n')),Object(a.b)("h4",{id:"modal-props"},"Modal props"),Object(a.b)(l.d,{of:r.a,mdxType:"Props"}),Object(a.b)("h4",{id:"custom-modal-example"},"Custom modal example"),Object(a.b)("p",null,"The ",Object(a.b)("inlineCode",{parentName:"p"},"Modal")," component is a wrapper around the ",Object(a.b)("inlineCode",{parentName:"p"},"useModalManager")," hook and the external dependency ",Object(a.b)("a",i({parentName:"p"},{href:"https://github.com/theKashey/react-focus-lock"}),"FocusLock"),". If you want to customise how your modals are rendered, you can easily do so by re-composing its elements in a different way. The example below is a slightly simplified version of the built-in ",Object(a.b)("inlineCode",{parentName:"p"},"Modal")," component that you can use as a guide."),Object(a.b)("p",null,"Be sure to include the ",Object(a.b)("inlineCode",{parentName:"p"},'role="dialog"')," and ",Object(a.b)("inlineCode",{parentName:"p"},'aria-modal="true"')," attributes on your modal component, as well as ",Object(a.b)("inlineCode",{parentName:"p"},"aria-label")," or ",Object(a.b)("inlineCode",{parentName:"p"},"aria-labelledby"),"."),Object(a.b)("pre",null,Object(a.b)("code",i({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport Portal from 'base5-ui/Portal';\nimport CenterContent from 'base5-ui/CenterContent';\nimport {useModalManager} from 'base5-ui/Modal/ModalManager';\nimport FocusLock from 'react-focus-lock';\n\nconst ModalWrapper = /* Your custom modal wrapper styling. */\nconst Overlay = /* Your custom overlay styling. */\n\nfunction Modal({children, name, onRequestClose, ...otherProps}) {\n    /**\n     * useModalManager returns a ref that must be\n     * passed to the modal wrapper component, and\n     * an `isAtTop` flag that's true when this modal\n     * is at the top (when multiple modals are open).\n     */\n    const {modalRef, isAtTop} = useModalManager({\n        name,\n        onRequestClose,\n    });\n\n    return (\n        <Portal>\n            <ModalWrapper\n                ref={modalRef}\n                id={name}\n                {...otherProps}\n                role=\"dialog\"\n                aria-modal=\"true\"\n            >\n                <CenterContent fillParent>\n                    <FocusLock>\n                        {isAtTop && <Overlay onClick={onRequestClose} />}\n                        {children}\n                    </FocusLock>\n                </CenterContent>\n            </ModalWrapper>\n        </Portal>\n    );\n}\n")))}void 0!==p&&p&&p===Object(p)&&Object.isExtensible(p)&&!p.hasOwnProperty("__filemeta")&&Object.defineProperty(p,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/Modal/README.mdx"}}),p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-modal-readme-mdx-ba161b24fba90d3df769.js.map